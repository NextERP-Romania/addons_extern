<?xml version="1.0" encoding="utf-8"?>
<odoo>

<!--  just for purchase: "and o.purchase_id"  -->
    <template id="valued_purchase_report_picking" inherit_id="stock.report_delivery_document">
    <!--  table for o.state=='done'  meaning that has serial numbers and packaging 
    lines are stock_move_lines     ( the not done tabels has lines as stock_moves)
    -->
       <xpath expr="//table[@name='stock_move_line_table']/thead/tr" position="inside">
             <t t-if="o.valued and o.move_line_ids and o.purchase_id and  o.show_shop_price">   
                <th class="text-right"><strong>List Price</strong></th>
                <th class="text-right"><strong>Margin</strong></th>
                <th class="text-right"><strong>sale with margin total</strong></th>
             </t>
         </xpath>
    </template>

<!-- modify the stock_move_line templates for with lots and without -->
	<template id="stock_report_purchase_delivery_price_values" inherit_id="stock.stock_report_delivery_has_serial_move_line">
		<xpath expr="//td[last()]" position="inside">
         <t t-if="o.valued and o.purchase_id and o.move_line_ids and  o.show_shop_price">
                <td class="text-right"><span t-field="move_line.list_price" /></td>
                <td class="text-right"><span t-field="move_line.margin" /></td>
                <td class="text-right"><span t-field="move_line.sale_with_margin_price_total"/></td>
            </t>			
		</xpath>	
	</template>

	<template id="stock_report_purchase_delivery_agg_price_values" inherit_id="stock.stock_report_delivery_aggregated_move_lines">
		<xpath expr="//td[last()]" position="after">
         <t t-if="o.valued and o.purchase_id and o.move_line_ids and  o.show_shop_price">
               <td class="text-right"> <span t-esc="aggregated_lines[line]['list_price']"/> </td>
                <td class="text-right"> <span t-esc="aggregated_lines[line]['margin']"/> </td>
                 <td class="text-right"><span t-esc="aggregated_lines[line]['sale_with_margin_price_total']"/></td>
             </t>			
		</xpath>	
	</template>

</odoo>
